@use '../abstracts/index' as v;

/* ==========================================================================
   LOGIQUE DE SWITCH & COULEURS DARK MODE
   ========================================================================== */

// 1. ÉTAT INITIAL (MODE CLAIR)
.theme-btn {
    .sun-icon { display: none !important; }
    .moon-icon { display: block !important; }
}

// 2. ÉTAT DARK THEME (Activé par le JS sur le body)
body.dark-theme {
    background-color: #050505 !important;
    color: #ffffff !important;

    // Inversion des icônes
    .theme-btn {
        .sun-icon { display: block !important; }
        .moon-icon { display: none !important; }
    }

    // Correctif Burger
    .burger-btn {
        .burger-line {
            background-color: #ffffff !important;
        }
    }

    // Header en mode sombre
    header.main-header {
        background-color: #0a0a0b !important;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;

        .logo { color: #ffffff !important; }
        
        .action-btn, .theme-btn {
            color: #ffffff !important;
            background: rgba(255, 255, 255, 0.05);
            svg { stroke: #ffffff !important; }
        }
    }

    // Mega Menu en mode sombre
    .mega-menu-content {
        background-color: #0a0a0b !important;
        
        .col-title, .mobile-pill-title, .link-text {
            color: #ffffff !important;
        }

        .is-pill {
            background: rgba(255, 255, 255, 0.05) !important;
            border-color: rgba(255, 255, 255, 0.1) !important;
            
            a {
                color: #ffffff !important;
                .icon-wrapper {
                    background: rgba(255, 255, 255, 0.05) !important;
                    svg { stroke: #ffffff !important; }
                }
                .arrow { color: #ffffff !important; }
            }
        }
    }

    /* ----------------------------------------------------------------------
       CORRECTIF AUTONOMIE : UX-PERSONA CARD
       On empêche le texte de devenir blanc dans cette zone car le fond reste blanc.
       ---------------------------------------------------------------------- */
    &.ux-page-persona {
        .persona-card {
            background-color: #ffffff !important; // La carte reste blanche
            border-color: #eee !important;

            .persona-main {
                background-color: #ffffff !important; // Le fond reste blanc
                
                // ON FORCE LE TEXTE A RESTER NOIR/SOMBRE
                // Pour annuler le "color: #ffffff" du body.dark-theme
                h1, h2, h3, h4, p, li, span, strong, div, b {
                    color: #2c3e50 !important; 
                }
            }
            
            // On s'assure que la toolbar de copie reste aussi lisible (noir sur blanc)
            .journey-toolbar {
                .btn-tool {
                    color: #333 !important;
                }
            }
        }
    }
}